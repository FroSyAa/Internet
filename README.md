# Магазин мотоциклов MOTO-MOTO

Полнофункциональный интернет-магазин мотоциклов с системой регистрации, авторизации, корзиной и заказами.

## Основные возможности

- Регистрация и авторизация пользователей (JWT)
- Просмотр каталога мотоциклов по категориям
- Добавление товаров в корзину
- Оформление заказов
- История заказов пользователя
- Корзина в Redis с автоудалением через 24 часа
- Хранение завершенных заказов в PostgreSQL

## Технологии

### Backend
- Node.js + Express
- PostgreSQL (хранение товаров, пользователей, заказов)
- Redis (временное хранение корзин с TTL 24 часа)
- JWT для аутентификации
- bcryptjs для хеширования паролей

### Frontend
- Vanilla JavaScript (без React)
- HTML5 + CSS3
- Адаптивный дизайн

## Структура проекта

```
motorcycle-shop/
├── backend/               # Backend API
│   ├── src/
│   │   ├── config/       # Конфигурация БД и Redis
│   │   ├── controllers/  # Контроллеры (auth, cart, orders, products)
│   │   ├── middleware/   # Middleware (аутентификация)
│   │   ├── routes/       # Маршруты API
│   │   └── index.js      # Главный файл сервера
│   ├── Dockerfile
│   └── package.json
├── frontend/             # Frontend
│   ├── public/
│   │   ├── css/         # Стили
│   │   ├── js/          # JavaScript
│   │   └── images/      # Изображения
│   ├── *.html           # HTML страницы
│   ├── Dockerfile
│   └── nginx.conf
├── database/            # Инициализация БД
│   └── init.sql
└── docker-compose.yml   # Конфигурация Docker

Приложение будет доступно по адресу: http://localhost:8080

## API Endpoints

### Аутентификация
- POST /api/auth/register - Регистрация
- POST /api/auth/login - Вход
- GET /api/auth/profile - Получить профиль (требует авторизации)

### Товары
- GET /api/products - Получить все товары
- GET /api/products?category=Спортбайки - Получить товары по категории
- GET /api/products/:id - Получить товар по ID
- GET /api/products/categories - Получить список категорий

### Корзина (требует авторизации)
- GET /api/cart - Получить корзину
- POST /api/cart/add - Добавить товар в корзину
- PUT /api/cart/update - Обновить количество товара
- DELETE /api/cart/:productId - Удалить товар из корзины
- DELETE /api/cart - Очистить корзину

### Заказы (требует авторизации)
- POST /api/orders - Создать заказ из корзины
- GET /api/orders - Получить все заказы пользователя
- GET /api/orders/:id - Получить заказ по ID

## Особенности реализации

### Корзина в Redis
- Корзина пользователя хранится в Redis с ключом `cart:userId`
- Автоматическое удаление через 24 часа (TTL)
- При оформлении заказа корзина переносится в PostgreSQL и очищается из Redis

### Заказы в PostgreSQL
- Завершенные заказы хранятся постоянно в таблицах `orders` и `order_items`
- Доступна полная история заказов для каждого пользователя

### Навигация
- Логотип MOTO-MOTO является декоративным элементом (не кликабельный)
- Возврат на главную страницу через кнопку "Главная" в навигации
- Иконка корзины с бейджем показывает количество товаров

## Остановка проекта

```bash
docker-compose down
```

Для удаления всех данных (включая БД):
```bash
docker-compose down -v
```
